<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Edit</title>

        <script src="../cordova.js"></script>
        <script src="../js/jquery.min.js"></script>
        <link rel="stylesheet" href="../css/materialize.min.css" />
        <script type="text/javascript" src="../js/materialize.min.js"></script>
        <link rel="stylesheet" href="../css/icons.css" />

        <link rel="stylesheet" type="text/css" href="../css/general.css">
        <script type="text/javascript" src="../js/general.js"></script>
        <script src="../js/actions.js"></script>

        <script>
            // Can be used in this page to get the information about the trigger.
            let trigger = JSON.parse(query.get("trigger"));
            let triggerId = query.get("triggerId");

            function save(){
                if(triggerId === null){
                    action.triggers.push(trigger);
                }else{
                    action.triggers[triggerId] = trigger;
                }
                saveActions();
                window.location.href = "edit.html?action=" + actionId;
            }
        </script>
    </head>
    <body>

        <nav id="header" class="red">
            <a href="edit.html" id="back" class="sidenav-trigger"><i class="icon-back"></i></a>
            <script>
                document.addEventListener("deviceready", function(){
                    $("#back").attr("href", $("#back").attr("href") + "?action=" + actionId);
                })
            </script>
            <h5 class="action-name"></h5>
        </nav>

        <div id="proximity" style="display: none">
            <div class="help-text" style="display: block;">
                <h4>Proximity trigger not implemented</h4>
                <p>This may be added in a future release</p>
            </div>
        </div>
        <div id="time" style="display: none">
            <div class="help-text" style="display: block;">
                <h4>Time of day trigger not implemented</h4>
                <p>This may be added in a future release</p>
            </div>
        </div>
        <div id="weather" style="display: none">
            <div class="help-text" style="display: block;">
                <h4>Weather trigger not implemented</h4>
                <p>This may be added in a future release</p>
            </div>
        </div>
        <div id="speed" style="display: none">
            <div class="help-text" style="display: block;">
                <h4>Speed trigger not implemented</h4>
                <p>This may be added in a future release</p>
            </div>
        </div>
        <div id="devices" style="display: none">
            <div class="help-text" style="display: block;">
                <h4>Devices trigger not implemented</h4>
                <p>This may be added in a future release</p>
            </div>
        </div>

        <button onclick="save()" class="modal-trigger primary-btn btn-floating btn-large waves-effect waves-light red"><i class="icon-done"></i></button>

        <script>
            $("#" + trigger.type).show();
        </script>

    </body>
</html>