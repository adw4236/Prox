<!DOCTYPE html>
<html>
    <head>
        <title>Settings</title>

        <script src="cordova.js"></script>
        <script src="js/jquery.min.js"></script>
        <link rel="stylesheet" href="css/materialize.min.css" />
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <link rel="stylesheet" href="css/icons.css" />

        <link rel="stylesheet" type="text/css" href="css/general.css">
        <script type="text/javascript" src="js/general.js"></script>
        <script type="text/javascript" src="js/settings.js"></script>

        <script>
            document.addEventListener("deviceready", function(){
                for(let key in localStorage){
                    if(!localStorage.hasOwnProperty(key)) continue;
                    if(!key.startsWith("Option")) continue;

                    let id = key.replace("Option.", "");
                    $("#" + id).prop("checked", localStorage.getItem(key) === "true");
                }

                $(".option").on("click", function(e){
                    let id = $(e.target).attr("id");
                    console.log(id);
                    localStorage.setItem("Option." + id, $(e.target).is(":checked"));
                });
            });
        </script>
    </head>
    <body>

        <nav id="header" class="red">
            <a href="#" data-target="sidenav" class="sidenav-trigger"><i class="icon-menu"></i></a>
            <h5>Settings</h5>
        </nav>

        <ul id="sidenav" class="sidenav">
            <li id="nav_title" class="red">
                <h4>Menu</h4>
            </li>
            <li><a href="index.html"><i class="icon-home"></i>Home</a></li>
            <li><a href="actions.html"><i class="icon-actions"></i>Actions</a></li>
            <li><a href="travel.html"><i class="icon-travel"></i>Travel</a></li>
            <li><a href="discovery.html"><i class="icon-discovery"></i>Discovery</a></li>
            <li><a href="packing.html"><i class="icon-packing"></i>Packing</a></li>
            <li><a href="settings.html"><i class="icon-settings"></i>Settings</a></li>
        </ul>

        <ul id="settings" class="collection with-header">
            <li class="collection-header">
                <h5>General Settings</h5>
            </li>
            <li class="collection-item">
                Do Not Disturb Mode
                <div class="secondary-content">
                    <div class="switch">
                        <label>
                            <input class="option" id="do_not_disturb" type="checkbox">
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>
            </li>
            <li class="collection-header">
                <h5>Notification Settings</h5>
            </li>
            <li class="collection-item">
                Action Notifications
                <div class="secondary-content">
                    <div class="switch">
                        <label>
                            <input class="option" id="actions_notifications" type="checkbox" checked>
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>
            </li>
            <li class="collection-item">
                Travel Notifications
                <div class="secondary-content">
                    <div class="switch">
                        <label>
                            <input class="option" id="travel_notifications" type="checkbox" checked>
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>
            </li>
            <li class="collection-item">
                Discovery Notifications
                <div class="secondary-content">
                    <div class="switch">
                        <label>
                            <input class="option" id="discovery_notifications" type="checkbox" checked>
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>
            </li>
            <li class="collection-item">
                Packing Notifications
                <div class="secondary-content">
                    <div class="switch">
                        <label>
                            <input  class="option" id="packing_notifications" type="checkbox" checked>
                            <span class="lever"></span>
                        </label>
                    </div>
                </div>
            </li>
            <li class="collection-header">
                <h5>Connected Accounts</h5>
            </li>


        <div id="connections" class="collection" style="margin-left:.5in">
            <a href="connect.html?connection=" id="connections-template" class="collection-item">
                <span class="name"></span>
                <i style="margin-right:.5in; float: right; font-size: 20px;" class="delete-connection icon-delete"></i>
            </a>
        </div>
        </ul>
        <div id="confirmDeleteConnection" class="modal">
            <div class="modal-content">
                <span>Are you sure you want to delete <span id="deletingConnection"></span>?</span>
            </div>
            <div class="modal-footer">
                <button id="cancelDeleteConnection" class="btn-floating btn-big waves-effect waves-light red"><i class="icon-x"></i></button>
                <button id="deleteConnection" class="btn-floating btn-big waves-effect waves-light red" style="margin-right: 10px;"><i class="icon-delete"></i></button>
            </div>
        </div>

        <button id="CreateConnection" class="modal-trigger primary-btn btn-floating btn-large waves-effect waves-light red"><i class="icon-add"></i></button>

        <script>
            // Confirming the create action dialog
            $("#CreateConnection").on("click", function(){
                window.location.href = "connect.html";
            });
        </script>

    </body>
</html>
